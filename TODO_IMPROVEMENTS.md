# 美活部 改善TODOリスト

## 🔴 緊急度: 高（ビジネス影響大）

### SEO・パフォーマンス
- [ ] **SSR（Server-Side Rendering）対応**
  - 現状: SPAのためSNSクローラーがメタタグを正しく取得できない
  - 対策: Next.jsへの移行、またはVercel Edge Functionsでのプリレンダリング実装
  - 影響: SNSシェア時のOGP表示、Google検索順位

- [ ] **画像最適化の徹底**
  - 現状: WebP変換が不完全、レスポンシブ画像未対応
  - 対策: `<picture>`タグ + srcset実装、自動WebP変換
  - 影響: ページ読み込み速度、モバイルUX、SEO評価

- [ ] **コード分割（Code Splitting）**
  - 現状: 全コンポーネントが1つのバンドルに含まれている
  - 対策: React.lazy + Suspenseでルートベースの分割実装
  - 影響: 初回読み込み時間、Core Web Vitals

- [ ] **内部リンク構造の最適化**
  - 現状: 関連記事への内部リンクが少ない
  - 対策: 記事下部に関連記事セクション追加、パンくずリスト強化
  - 影響: クローラビリティ、滞在時間、PV数

### アーキテクチャ・技術的負債
- [x] **型定義の統一** ✅ 2024/11/11 完了
  - 現状: `types.ts`と`src/lib/supabase.ts`に重複したArticle型が存在
  - 対策: supabase.tsの型を単一の情報源として、types.tsは削除または統合
  - 影響: バグの温床、メンテナンス性
  - 完了内容:
    - types.tsをリファクタリングし、DB関連型はsupabase.tsから再エクスポート
    - HeroSlide型をUI用とDB用で分離（HeroSlide / DBHeroSlide）
    - 画像取得エラーを修正（article.imageUrl → article.featured_image）
    - 各コンポーネントで正しいプロパティを参照するよう修正

- [ ] **ルーティングの改善**
  - 現状: App.tsxで手動if文によるルーティング
  - 対策: React Router導入、またはNext.jsのfile-based routing
  - 影響: コードの可読性、拡張性

- [ ] **エラーハンドリングの強化**
  - 現状: try-catchはあるが、ユーザーへのフィードバックが不十分
  - 対策: エラー境界（Error Boundary）実装、トースト通知追加
  - 影響: UX、デバッグ効率

- [ ] **環境変数の整理**
  - 現状: クライアント側に露出している変数の管理が不明確
  - 対策: .env.example作成、サーバー専用環境変数の分離
  - 影響: セキュリティ、デプロイ時のトラブル防止

## 🟡 緊急度: 中（UX・運用効率）

### コンテンツ管理機能
- [ ] **リッチエディタの機能拡張**
  - 画像サイズを3段階ではなく自由調整可能に（ドラッグリサイズ）
  - 表のセル結合、カラム幅調整機能
  - コードブロック挿入機能（シンタックスハイライト付き）
  - YouTube等の埋め込み対応

- [ ] **記事のバージョン管理**
  - 現状: 上書き保存のみ、履歴なし
  - 対策: 編集履歴テーブル追加、差分表示機能
  - 影響: 誤編集時のリカバリー、複数人での編集

- [ ] **下書きプレビュー機能の改善**
  - 現状: 公開前プレビューが実際の表示と異なる可能性
  - 対策: プレビューモードでの完全な再現性確保
  - 影響: 公開後の修正頻度削減

### UX改善
- [ ] **ローディング体験の最適化**
  - 現状: 強制1秒ローディング、意味のない待ち時間
  - 対策: スケルトンスクリーン実装、実際のデータ取得時のみローディング表示
  - 影響: 体感速度、離脱率

- [ ] **レスポンシブデザインの改善**
  - タブレット（768px-1024px）での表示最適化
  - 横向きスマホでの表示調整
  - PC大画面（1920px以上）での余白調整

- [ ] **アクセシビリティ対応**
  - aria-label, aria-describedbyの追加
  - キーボードナビゲーション対応
  - コントラスト比の改善（WCAG AA準拠）
  - スクリーンリーダー対応

### セキュリティ
- [ ] **XSS対策の強化**
  - 現状: Markdown→HTML変換時のサニタイズが不十分
  - 対策: DOMPurifyライブラリ導入、許可タグのホワイトリスト化
  - 影響: セキュリティリスク

- [ ] **Supabase RLS（Row Level Security）の見直し**
  - 全テーブルのポリシー設定確認
  - 匿名ユーザーの権限制限
  - 管理者権限の適切な分離

## 🟢 緊急度: 低（長期的改善）

### デザインシステム
- [x] **カラーパレットの統一** ✅ 2024/11/11 完了
  - 現状: `bg-rose-50`, `bg-pink-50`, `bg-purple-50`等が散在
  - 対策: Tailwind configでブランドカラー定義、CSS変数化
  - 完了内容:
    - tailwind.config.js作成（ブランドカラー定義）
    - CSS変数システムの実装（index.css）
    - カスタムカラー`#d11a68`を`brand-primary`クラスに統一
    - デザインシステムドキュメント（DESIGN_SYSTEM.md）作成
    - グラデーション、シャドウ、アニメーションの定義

- [ ] **コンポーネントライブラリの構築**
  - Button, Card, Input等の再利用可能コンポーネント
  - Storybookでのカタログ化

### 分析・最適化
- [ ] **A/Bテスト基盤の構築**
  - 記事タイトル、サムネイル、CTAボタンのテスト
  - Google Optimize または Vercel Edge Config

- [ ] **アナリティクスの強化**
  - GA4の詳細イベント設定（スクロール深度、クリック追跡）
  - ヒートマップツール導入（Hotjar等）
  - コンバージョンファネル分析

### コンテンツ戦略
- [ ] **記事レコメンデーション機能**
  - 類似記事の自動表示
  - ユーザーの閲覧履歴ベースのパーソナライズ

- [ ] **検索機能の強化**
  - 現状: タイトル・本文の単純文字列検索
  - 対策: Supabase Full-Text Search、またはAlgolia導入

- [ ] **タグ・カテゴリーの階層化**
  - カテゴリー内でのサブカテゴリー対応
  - タグクラウド表示

### マネタイズ機能
- [ ] **アフィリエイトリンク管理の強化**
  - クリック数トラッキング
  - リンク切れ自動検知
  - 収益レポート機能

- [ ] **広告配置の最適化**
  - Google AdSense統合
  - 記事内広告の自動挿入
  - 広告ブロック検知

### 運用効率化
- [ ] **記事予約投稿機能の改善**
  - 現状: scheduled_publish_atはあるが、自動公開未実装
  - 対策: Vercel Cron Jobs またはSupabase Edge Functions

- [ ] **記事一括操作機能**
  - 複数記事の一括削除、カテゴリー変更
  - CSVエクスポート/インポート

- [ ] **メディアライブラリの整理**
  - 画像の一元管理画面
  - 未使用画像の検出・削除機能

## 📊 パフォーマンス目標

### Core Web Vitals
- [ ] LCP (Largest Contentful Paint): 2.5秒以下
- [ ] FID (First Input Delay): 100ms以下
- [ ] CLS (Cumulative Layout Shift): 0.1以下

### SEO指標
- [ ] Google PageSpeed Insights: モバイル90点以上
- [ ] Lighthouse SEOスコア: 100点
- [ ] 月間オーガニック流入: 10,000PV以上（6ヶ月後目標）

## 🔧 技術スタック検討

### 推奨される移行先
1. **Next.js 15 (App Router)**
   - メリット: SSR, ISR, RSC, 最新のReact機能
   - 移行コスト: 高（全面リライト）
   - ROI: 非常に高（SEO、パフォーマンス大幅改善）

2. **Astro + React Islands**
   - メリット: 静的生成メイン、必要な箇所のみReact
   - 移行コスト: 中
   - ROI: 高（パフォーマンス特化）

3. **現状維持 + 部分改善**
   - Vite + React + ビルド時最適化強化
   - 移行コスト: 低
   - ROI: 中（段階的改善）

---

## 📝 備考

このリストは現時点での技術的評価に基づいており、ビジネス優先度に応じて順序を調整すべき。

**推奨アプローチ:**
1. ~~まず🔴緊急度高の「型定義の統一」「画像最適化」から着手~~ ✅ 型定義統一は完了
2. SEO改善として「内部リンク構造」「コード分割」を実施
3. 中長期的にNext.js移行を検討

**工数見積もり（概算）:**
- ~~型定義統一: 2-3日~~ ✅ 実際: 0.5日で完了（2024/11/11）
- 画像最適化: 3-5日
- コード分割: 2-3日
- Next.js移行: 2-3週間

**実装優先度は事業目標（PV獲得、収益化、ブランディング）に応じて調整してください。**
